<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Thomas Lehmann <thomas.lehmann.private@gmail.com">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Versioning and Tagging - jenkins-shared-library</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Versioning and Tagging";
    var mkdocs_page_input_path = "xversion.md";
    var mkdocs_page_url = "/jenkins-shared-library/xversion/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> jenkins-shared-library</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">User Guide</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../documentation/">How to organize Documenation</a>
                </li>
                <li class="">
                    
    <a class="" href="../gradle/">How to organize Gradle</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">DSL</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../virtualenv/">Python virtual environments</a>
                </li>
                <li class="">
                    
    <a class="" href="../xgradle/">Own Gradle DSL</a>
                </li>
                <li class="">
                    
    <a class="" href="../jobdslcode/">Job DSL code support</a>
                </li>
                <li class="">
                    
    <a class="" href="../xgit/">Git DSL</a>
                </li>
                <li class="">
                    
    <a class="" href="../xpublish/">The publisher</a>
                </li>
                <li class="">
                    
    <a class="" href="../xfind/">Find DSL</a>
                </li>
                <li class="">
                    
    <a class="" href="../xdup/">Duplicate Code Finder</a>
                </li>
                <li class="">
                    
    <a class="" href="../xparser/">Parser</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Versioning and Tagging</a>
    <ul class="subnav">
            
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Library</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../xlocal/">Use of the library without Jenkins</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">jenkins-shared-library</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>DSL &raquo;</li>
        
      
    
    <li>Versioning and Tagging</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/Nachtfeuer/jenkins-shared-library/edit/master/docs/xversion.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="versioning-and-tagging">Versioning and Tagging</h1>
<div class="toc">
<ul>
<li><a href="#versioning-and-tagging">Versioning and Tagging</a><ul>
<li><a href="#versioning">Versioning</a><ul>
<li><a href="#defining-your-version">Defining your version</a></li>
<li><a href="#version-as-string">Version as string</a></li>
<li><a href="#increment-the-version">Increment the version</a></li>
<li><a href="#retrieving-current-version">Retrieving current version</a></li>
<li><a href="#applying-version-to-tool">Applying version to tool</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h2 id="versioning">Versioning</h2>
<h3 id="defining-your-version">Defining your version</h3>
<p>First you define your version giving the individual parts
a name; the names are your personal choice. The numbers
are the initial version when there is no version yet.</p>
<pre><code class="groovy">def version = xversion.define(major:1, minor:0, patch:0)
println(version) // prints [data:[major:1, minor:0, patch:0], meta:[snapshot:false, prefix:'v']]
</code></pre>

<p>or using <em>major</em> and <em>minor</em> as default policy:</p>
<pre><code class="groovy">def version = xversion.define()
println(version) // prints [data:[major:1, minor:0], meta:[snapshot:false, prefix:'v']]
</code></pre>

<h3 id="version-as-string">Version as string</h3>
<p>If the <code>version.meta.snapshot</code> is true then <em>stringify</em> appends `-SNAPSHOT'
(<em>stringifyForTag</em> does not):</p>
<pre><code class="groovy">def version = xversion.define()
println(xversion.stringify(version)) // prints '1.0'
println(xversion.stringifyForTag(version)) // prints 'v1.0'
</code></pre>

<h3 id="increment-the-version">Increment the version</h3>
<p>The incrementor - as the name says - increments a version part.</p>
<pre><code class="groovy">def version = xversion.define(major:1, minor:0, patch:0)
version = xversion.increment(major:version)
println(version) // prints [data:[major:2, minor:0, patch:0], meta:[snapshot:false, prefix,'v']]
</code></pre>

<p>or</p>
<pre><code class="groovy">def version = xversion.define(major:2, minor:0, patch:0)
version = xversion.increment(minor:version)
println(version) // prints [data:[major:2, minor:1, patch:0], meta:[snapshot:false, prefix,'v']]
</code></pre>

<h3 id="retrieving-current-version">Retrieving current version</h3>
<p>You can retrieve the version either by the underyling build tools
or using last tag. When there is not tag the defined version is
used. It's expected that existing version match the version policy
otherwise an exception is thrown.</p>
<pre><code class="groovy">def version = xversion.get(maven:version)   // reading from pom.xml
def version = xversion.get(gradle:version)  // reading from build.gradle
def version = xversion.get(tag:version)     // reading from tag
</code></pre>

<h3 id="applying-version-to-tool">Applying version to tool</h3>
<p>It does change the version either in the <code>pom.xml</code> or in the <code>build.gradle</code>:</p>
<pre><code class="groovy">xversion.apply(maven:version)   // adjusts the pom.xml
xversion.apply(gradle:version)  // adjusts the version field in the build.gradle
xversion.apply(tag:version)     // creates and pushes version as tag
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../xlocal/" class="btn btn-neutral float-right" title="Use of the library without Jenkins">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../xparser/" class="btn btn-neutral" title="Parser"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/Nachtfeuer/jenkins-shared-library/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../xparser/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../xlocal/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
